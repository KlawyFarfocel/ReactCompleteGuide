{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { uiActions } from \"./uiSlice\";\nconst shoppingCartInitialState = {\n  items: [],\n  isVisible: false\n};\nconst shoppingCartSlice = createSlice({\n  name: \"cart\",\n  initialState: shoppingCartInitialState,\n  reducers: {\n    toggleCart(state) {\n      state.isVisible = !state.isVisible;\n    },\n    addToCart(state, action) {\n      if (state.items.findIndex(item => item.title === action.payload.title) === -1) {\n        state.items = [...state.items, {\n          title: action.payload.title,\n          price: action.payload.price,\n          quantity: 1\n        }];\n      } else {\n        const updatedData = state.items.map(item => {\n          if (item.title === action.payload.title) {\n            return {\n              ...item,\n              quantity: item.quantity + 1\n            };\n          }\n          return item;\n        });\n        console.log(updatedData);\n        state.items = [...updatedData];\n      }\n    },\n    increaseAmount(state, action) {\n      const updatedData = state.items.map(item => {\n        if (item.title === action.payload.title) {\n          return {\n            ...item,\n            quantity: item.quantity + 1\n          };\n        }\n        return item;\n      });\n      state.items = updatedData;\n    },\n    decreaseAmount(state, action) {\n      const updatedData = state.items.map(item => {\n        if (item.title === action.payload.title) {\n          if (item.quantity !== 1) {\n            return {\n              ...item,\n              quantity: item.quantity - 1\n            };\n          } else {\n            return null;\n          }\n        }\n        return item;\n      }).filter(Boolean);\n      console.log(updatedData);\n      state.items = updatedData;\n    }\n  }\n});\nfunction sendCartData(cart) {\n  return async dispatch => {\n    dispatch(uiActions.showNotification({\n      status: 'pending',\n      title: 'Sending...',\n      message: 'Sending cart data!'\n    }));\n    await sendRequest.catch;\n    dispatch(uiActions.showNotification({\n      status: 'success',\n      title: 'Success!',\n      message: 'Sent cart data successfully!'\n    }));\n    async function sendRequest() {\n      const response = await fetch('https://fast-datum-303315-default-rtdb.firebaseio.com/cart.json', {\n        method: \"PUT\",\n        body: JSON.stringify(cart)\n      });\n      if (!response.ok) {\n        throw new Error(\"Sending cart data failed!\");\n      }\n    }\n  };\n}\nexport default shoppingCartSlice.reducer;\nexport const cartActions = shoppingCartSlice.actions;","map":{"version":3,"names":["createSlice","uiActions","shoppingCartInitialState","items","isVisible","shoppingCartSlice","name","initialState","reducers","toggleCart","state","addToCart","action","findIndex","item","title","payload","price","quantity","updatedData","map","console","log","increaseAmount","decreaseAmount","filter","Boolean","sendCartData","cart","dispatch","showNotification","status","message","sendRequest","catch","response","fetch","method","body","JSON","stringify","ok","Error","reducer","cartActions","actions"],"sources":["D:/KOD/ReactCompleteGuide/Section-20-Advanced-Redux/01-starting-project/src/store/shoppingCartSlice.js"],"sourcesContent":["import {createSlice} from \"@reduxjs/toolkit\"\r\nimport { uiActions } from \"./uiSlice\"\r\nconst shoppingCartInitialState={\r\n    items:[],\r\n    isVisible:false\r\n}\r\nconst shoppingCartSlice=createSlice({\r\n    name:\"cart\",\r\n    initialState:shoppingCartInitialState,\r\n    reducers:{\r\n        toggleCart(state){\r\n            state.isVisible=!state.isVisible\r\n        },\r\n        addToCart(state,action){\r\n            if(state.items.findIndex(item=>item.title===action.payload.title)===-1){\r\n                state.items=[...state.items,{title:action.payload.title,price:action.payload.price,quantity:1}]\r\n            }else{\r\n                const updatedData=state.items.map(item =>{\r\n                    if(item.title===action.payload.title){\r\n                        return {...item,quantity:item.quantity+1}\r\n                    }\r\n                    return item;\r\n               })\r\n               console.log(updatedData)\r\n               state.items=[...updatedData];\r\n            }\r\n        },\r\n        increaseAmount(state,action){\r\n           const updatedData=state.items.map(item =>{\r\n                if(item.title===action.payload.title){\r\n                    return {...item,quantity:item.quantity+1}\r\n                }\r\n                return item;\r\n           })\r\n           state.items=updatedData;\r\n        },\r\n        decreaseAmount(state,action){\r\n            const updatedData=state.items.map(item =>{\r\n                if(item.title===action.payload.title){\r\n                    if(item.quantity!==1){\r\n                        return {...item,quantity:item.quantity-1}\r\n                    }else{\r\n                        return null;\r\n                    }\r\n                }\r\n                return item;\r\n           }).filter(Boolean)\r\n           console.log(updatedData)\r\n           state.items=updatedData;\r\n        }\r\n    }\r\n})\r\n\r\nfunction sendCartData(cart){\r\n    return async (dispatch)=>{\r\n        dispatch(\r\n            uiActions.showNotification({\r\n                status: 'pending',\r\n                title: 'Sending...',\r\n                message: 'Sending cart data!',\r\n            })\r\n        )\r\n        await sendRequest.catch\r\n        dispatch(\r\n            uiActions.showNotification({\r\n                status: 'success',\r\n                title: 'Success!',\r\n                message: 'Sent cart data successfully!',\r\n            })\r\n        );\r\n        async function sendRequest(){\r\n            const response= await fetch('https://fast-datum-303315-default-rtdb.firebaseio.com/cart.json',{\r\n                method:\"PUT\",\r\n                body:JSON.stringify(cart)\r\n            })\r\n            if(!response.ok){    \r\n                throw new Error(\"Sending cart data failed!\")\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default shoppingCartSlice.reducer\r\nexport const cartActions=shoppingCartSlice.actions;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}